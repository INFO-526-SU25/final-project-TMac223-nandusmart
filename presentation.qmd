---
title: "A Statistical Exploration of Himalayan Expeditions"
subtitle: "INFO 526 - Summer 2025 - Final Project"
author: "Trevor Macdonald & Nandakumar Kuthalaraja"
title-slide-attributes:
  data-background-image: images/HimalayanExpedition.png
  data-background-size: stretch
  data-background-opacity: "0.7"
  data-slide-number: none
  style: "color: white;"
format:
  revealjs:
    theme:  ['data/customtheming.scss']
  
editor: visual
execute:
  echo: false
---

```{r}
#| label: load-packages
#| include: false

# Load packages here
pacman::p_load(tidymodels,
               tidyverse, patchwork, scales, ggplot2)

```

```{r}
#| label: setup
#| include: false

# Plot theme
ggplot2::theme_set(ggplot2::theme_minimal(base_size = 11))

# For better figure resolution
knitr::opts_chunk$set(
  fig.retina = 3, 
  dpi = 300, 
  fig.width = 6, 
  fig.asp = 0.618 
  )
```

## Our Dataset

-   Himalayan Database - Created to continue the legacy of Elizabeth Hawley, a journalist who spent decades documenting Himalayan expeditions.

-   Dataset - [**TidyTuesday GitHub repository**](https://github.com/rfordatascience/tidytuesday/tree/main/data/2025/2025-01-21) and has been amended to the years 2020 - 2024 to manage file size.

-   There are 2 main datasets :

    -   **exped_tidy** - Contains details of expeditions

    -   **peaks_tidy** - Includes data about the Himalayan Peaks

## Question 1

**What factors contribute to the success or failure of a summit?**

-   Analyze expedition outcomes using both expedition and peak variables. "Success" will be defined based on the \`TERMREASON_FACTOR\`, with specific values representing a successful summit.

-   Use factors like -- geography, team size, oxygen use, and other factors relate to the likelihood of success

## Question 1 : Approach

-   Get Data from the CSV files

```{r}
#| code-fold: true
#| code-summary: "Code"
#| echo: true
#| results: hide
#| message: false
#| warning: false

exped <- read_csv("data/exped_tidy.csv")
colnames(exped)
head(exped)

table(exped$SUCCESS1, useNA = "ifany")

```

-   Build Model & Variable Inferences

```{r}
#| code-fold: true
#| code-summary: "Code"
#| echo: true
#| results: hide
#| message: false
#| warning: false

table(exped$SUCCESS1, useNA = "ifany")
exped2 <- exped |>
  mutate(
    success = ifelse(SUCCESS1 %in% c("Y", "Yes", "yes"), 1,
                     ifelse(SUCCESS1 %in% c("N", "No", "no"), 0, as.numeric(SUCCESS1))),
    peak = as.factor(PEAKID),
    team_size = as.numeric(TOTMEMBERS),
    oxygen = ifelse(O2USED %in% c("Y", "Yes", "yes"), 1,
                    ifelse(O2USED %in% c("N", "No", "no"), 0, as.numeric(O2USED))),
    season = as.factor(SEASON)
  ) |>
  filter(!is.na(success), !is.na(team_size), !is.na(oxygen)) 

model <- glm(
  success ~ peak + team_size + oxygen + season + YEAR,
  data = exped2,
  family = "binomial"
)
```

-   Start plotting various charts building up to the case

## Question 1 : Start

Let's start with what is the overall Success vs Failure Rate out of all overall expeditions.

```{r}

exped2 |>
  mutate(outcome = ifelse(success == 1, "Success", "Failure")) |>
  group_by(outcome) |>
  summarize(n = n()) |>
  mutate(rate = n / sum(n)) |>
  ggplot(aes(x = outcome, y = rate, fill = outcome)) +
    geom_col(width = 0.5) +
    scale_y_continuous(labels = scales::percent) +
  scale_fill_manual(values = c("Success" = "forestgreen", "Failure" = "firebrick")) +
    labs(
      title = "Overall Expedition Success vs Failure Rate",
      x = "Expedition Outcome",
      y = "Proportion"
    ) +
    theme_minimal()

```

## Question 1 : Explore Team Size

::::: columns
::: {.column width="50%"}
```{r}
ggplot(exped2, aes(team_size)) +
  geom_histogram(binwidth = 1, fill = "steelblue", color = "white") +
  facet_wrap(~ success, labeller = labeller(success = c(`0` = "Failure", `1` = "Success"))) +
  labs(
    x     = "Team Size",
    y     = "Count",
    title = "Distribution of Team Sizes\nfor Success vs. Failure"
  )
```
:::

::: {.column width="50%"}
```{r}
ggplot(exped2, aes(x = team_size, fill = factor(success))) +
  geom_bar(position = "fill") +
  scale_x_continuous(
    breaks = seq(0, max(exped2$team_size, na.rm = TRUE), by = 10),
    expand = expansion(add = c(0, 0))
  ) +
  scale_y_continuous(labels = scales::percent_format()) +
  labs(
    x     = "Team Size",
    y     = "Proportion",
    fill  = "Success\n(1 = yes)",
    title = "Proportion of Success vs. Failure\nby Team Size"
  ) +
  theme(
    axis.text.x = element_text(angle = 90, vjust = 0.5),
    plot.title  = element_text(hjust = 0.5)
  )

```
:::
:::::
::: columns
::: {.column width="25%"}

<!-- blank left spacer -->
:::

::: {.column width="50%"}
```{r}
df_bin <- exped2 %>%
  group_by(team_size) %>%
  summarize(rate = mean(success), n = n(), .groups="drop") %>%
  filter(n > 3)

ggplot(df_bin, aes(x = team_size, y = rate)) +
  geom_segment(aes(xend = team_size, y = 0, yend = rate), color = "grey70") +
  geom_point(size = 2) +
  scale_y_continuous(labels = scales::percent_format()) +
  labs(
    x     = "Team Size",
    y     = "Success Rate",
    title = "Lollipop Chart of Success Rate by Team Size"
  )

```
:::

::: {.column width="25%"}

<!-- blank right spacer -->
:::
:::


## Question 1 : Explore Team Size

::: {style="font-size:0.7em; line-height:1.2;"}
`These plots suggests a non-linear relationship between team size and summit success:`

-   **`Very small teams (1–5 climbers)`**\ tend to have very high success rates.

    Probable cause - agility, lighter logistical needs, and tighter decision-making.\

-   **`Small-to-medium teams (3–8 climbers)`**\ show a noticeable dip in success.

    Probable cause - enough complexity to introduce friction but not enough manpower to provide robust support.\

-   **`Medium-large teams (9–20 climbers)`**\ exhibit steadily increasing success rates, peaking around 20 members at or near 100%.

    Probable cause - have enough members to spread tasks, establish well-stocked camps without yet suffering the full burden of very large-group logistics.\

-   **`Very large teams (20+)`**\ see a gradual decline in success.

    Probable cause - supplies, campsite congestion, decision latency.\
:::

## Question 2

### Approach:

### Wrap up
